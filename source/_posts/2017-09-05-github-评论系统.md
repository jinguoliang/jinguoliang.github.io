---
layout: post
title: 用 Github Issue API 实现评论系统
categories:
- 编程
tags:
- Github
- 评论
- API
- kotlin
---

## 源起
博客是一个表达自己观点，抒发自己感情，展现展现自己所能的一个好的地方。它是我们向世界输送信息的发射台，然而我们的输出，如果没有回应，这是多么让人伤心的一件事情。我们的博客需要评论，这样作者跟读者才能产生双向的沟通，才能实现读者与作者的共同成长。

我在 Github 上搭建了一个静态的博客，最开始，我使用了多说作为评论系统，然而，今年六月份，多说竟然不在维护了。然后，我有试了试有言，说什么 https 不能调用 http，感觉超级蛋疼。最终，还是使用了国外的一个评论系统，Disqus, 然而，悲催的是，它竟然被伟大的长城挡在了外面，诸多不编呀。

最终，我萌生了自己写一个评论系统的想法，我的需求很简单，能对每个文章分别评论，并且可以支持回复再回复，并且有提醒，我突发奇想，想到了使用 Gitbub 的问题系统来做存储，而他的回复功能，及提醒功能，都很符合我的需求。

啊，这只是一篇需求分析文档，可行性分析文档：）

## Kotlin

我打算使用 Kotlin， 因为它的确很爽，它可以转成 JavaScript。

## Github API

我们需要使用 Github API 来实现登陆功能，和评论创建，回复等功能。
[这里是 Github API](https://developer.github.com/v3/)

### 登录
我们需要做一个评论系统，而这个评论系统，需要区分用户，我们就直接使用Github登录来区分就好了。Github为我们提供了两种集成github[登录的方式](https://developer.github.com/apps/building-integrations/setting-up-a-new-integration/about-choosing-an-integration-type/)：

1. GitHub Apps
2. OAuth Apps

目测第二个就是单点登录，而第一个就是列在[这里](https://github.com/marketplace)的应用了，我们是不是也可以放在这里呢，希望总是要有的，万一实现了呢：）

### 创建评论
想所有的评论系统，在我们的每个需要评论的地方，会有评论输入框，当输入文本，并点击发送时，我们就对当前的页面发表了一个评论。而对应着，我们的实现会创建一个 Issue。这个 Issue 的*标题*就是*当前网页的网址*。而它的内容就是评论内容。
[这里](https://developer.github.com/v3/issues/#create-an-issue)是API

### 回复评论
回复评论就是回复 Issue 嘛没什么好说的
[这里](https://developer.github.com/v3/issues/comments/#create-a-comment)是API  
好吧，我发现它不能直接回复一个回复

### 列出所有回复
来到一个页面，我们不仅需要一个评论框，还要可以看到当前所有的评论，回复，这也很简单。
[这里](https://developer.github.com/v3/issues/comments/#list-comments-on-an-issue)是API

感觉非常简单嘛